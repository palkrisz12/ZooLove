<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <link rel="stylesheet" href="Nav.css">
    <title>Bejelentkezés</title>
</head>
<body>
<div id = "nav-placeholder">
</div>

<script>
    $(function(){
        $("#nav-placeholder").load("navbar.html");
    });
</script>

</nav>
<br>

<form action="welcome.php" method="post">
    <div class="container">

        <h1><label name="fnevl"><b>Felhasználónév</b></label></h1>
        <input type="text"  placeholder="Felhasználónév" id="uName" required>
        <h1><label name="pswl"><b>Jelszó</b></label></h1>
        <input type="password" placeholder="Add meg a jelszót!" id="password"  required>
        <button onclick="login()">Bejelentkezem</button>

        <?php if (isset($error)): ?>
        <p><?php echo $error; ?></p>
        <?php endif; ?>
    </div>

    <script type="application/javascript">
        function saveAndOpenPage() {
            trySave();
            window.location.href = 'login.html';
            alert("Jelentkezz be!")
        }
        function login()
        {
            const xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (xhttp.readyState == 4 && xhttp.status == 200) {
                    const result = JSON.parse(xhttp.responseText);
                    console.log(result);
                }
            }
            const params = new URLSearchParams(
                {
                    "userName":uName,
                    "password":password
                })

            xhttp.open("POST", "./welcome.php" + params.toString());
            xhttp.send();
        }

    </script>


</form>
</body>
</html>